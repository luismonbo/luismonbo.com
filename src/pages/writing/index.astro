---
// Writing index page - lists all blog posts
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// Get all posts from the 'writing' collection
const allPosts = await getCollection('writing');

// Filter out drafts and sort by date (newest first)
const publishedPosts = allPosts
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());

// Format date helper function
// Takes a Date object and returns "January 15, 2026"
function formatDate(date: Date): string {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }).format(date);
}
---

<Layout
	title="Writing · luismonbo"
	description="Essays on politics, philosophy, and technology. I write to clarify my thinking and occasionally share what I learn."
>
	<div class="max-w-none">
		<!-- TYPOGRAPHY: Larger title -->
		<!-- SPACING: More space after title (mb-6) -->
		<h1 class="text-5xl font-bold tracking-tight mb-6">Writing</h1>

		<!-- TYPOGRAPHY: Larger intro text -->
		<!-- SPACING: More breathing room (mb-16) -->
		<p class="text-xl text-gray-700 leading-relaxed mb-16">
			Essays on politics, philosophy, and technology. I write to clarify my thinking and occasionally share what I learn.
		</p>

		<!-- Posts list -->
		<!-- SPACING: More space between posts (space-y-12 instead of space-y-10) -->
		<div class="space-y-12">
			{publishedPosts.map(post => (
				<article class="group">
					<a href={`/writing/${post.slug}`} class="block">
						<!-- Post title -->
						<!-- TYPOGRAPHY: Larger post titles (text-3xl) for more hierarchy -->
						<h2 class="text-3xl font-semibold tracking-tight mb-3 group-hover:text-gray-600 transition-colors">
							{post.data.title}
						</h2>

						<!-- Date and tags -->
						<!-- SPACING: Slightly more margin (mb-4) -->
						<div class="flex items-center gap-3 text-sm text-gray-500 mb-4">
							<time datetime={post.data.pubDate.toISOString()}>
								{formatDate(post.data.pubDate)}
							</time>

							{post.data.tags && post.data.tags.length > 0 && (
								<span class="text-gray-300">·</span>
							)}

							{post.data.tags && post.data.tags.map(tag => (
								<span class="text-gray-400">#{tag}</span>
							))}
						</div>

						<!-- Description/excerpt -->
						<!-- TYPOGRAPHY: Larger description text (text-lg) -->
						<p class="text-lg text-gray-700 leading-relaxed">
							{post.data.description}
						</p>
					</a>
				</article>
			))}
		</div>
	</div>
</Layout>
